!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";(function(t){function i(t){document.addEventListener("DOMContentLoaded",t,!1)}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return s});const s=window.matchMedia("(prefers-reduced-motion)")}).call(this,n(2))},function(t,e,n){!function(t){"use strict";function e(t,e){let n=0;return function(...i){const s=(new Date).getTime();if(!(s-n<t))return n=s,e(...i)}}function n(t){return Math.floor(t.reduce((t,e)=>t+e,0)/t.length)}const i=new class{constructor(){this.lastX=0,this.lastY=0,this.lastWidth=window.innerWidth,this.lastHeight=window.innerHeight,this.lastMouseX=0,this.lastMouseY=0,this.scrollHeight=document.body.scrollHeight,this.scrollChange=!1,this.sizeChange=!1,this.mouseChange=!1,this.currX=0,this.currY=0,this.currWidth=window.innerWidth,this.currHeight=window.innerHeight,this.currMouseX=0,this.currMouseY=0,this.mouseXVelocity=[],this.mouseYVelocity=[],this.lastMouseXVelocity=0,this.lastMouseYVelocity=0,this.updating=!1,this.callbacks=[],this.update=this.update.bind(this),this.handleResize=this.handleResize.bind(this),this.handleMouse=this.handleMouse.bind(this),this.formatData=this.formatData.bind(this),this.watch=this.watch.bind(this),this.unwatch=this.unwatch.bind(this),this.handleResize=e(110,this.handleResize),this.handleMouse=e(75,this.handleMouse),window.addEventListener("resize",this.handleResize),window.addEventListener("mousemove",this.handleMouse),requestAnimationFrame(this.update)}handleResize(t){this.currWidth=window.innerWidth,this.currHeight=window.innerHeight}handleMouse(t){this.currMouseX=t.clientX,this.currMouseY=t.clientY}formatData(){return{scroll:{changed:this.scrollChange,left:Math.floor(this.lastX),right:Math.floor(this.lastX+this.lastWidth),top:Math.floor(this.lastY),bottom:Math.floor(this.lastY+this.lastHeight),velocity:{x:Math.floor(this.scrollXVelocity)||0,y:Math.floor(this.scrollYVelocity)||0}},size:{changed:this.sizeChange,x:Math.floor(this.lastWidth),y:Math.floor(this.lastHeight),docY:Math.floor(this.scrollHeight)},mouse:{changed:this.mouseChange,x:Math.floor(this.lastMouseX),y:Math.floor(this.lastMouseY),velocity:{x:Math.floor(this.lastMouseXVelocity)||0,y:Math.floor(this.lastMouseYVelocity)||0}}}}updateSize(){}update(){const{currWidth:t,currHeight:e,currMouseX:i,currMouseY:s}=this;if(this.updating)return!1;this.scrollChange=this.sizeChange=this.mouseChange=!1,window.pageXOffset==this.lastX&&0!=this.scrollXVelocity&&(this.scrollXVelocity=0,this.scrollChange=!0),window.pageYOffset==this.lastY&&0!=this.scrollYVelocity&&(this.scrollYVelocity=0,this.scrollChange=!0),window.pageXOffset!=this.lastX&&(this.scrollChange=!0,this.scrollXVelocity=Math.floor(window.pageXOffset-this.lastX),this.lastX=window.pageXOffset),window.pageYOffset!=this.lastY&&(this.scrollChange=!0,this.scrollYVelocity=Math.floor(window.pageYOffset-this.lastY),this.lastY=window.pageYOffset),t!=this.lastWidth&&(this.lastWidth=t,this.scrollHeight=document.body.scrollHeight,this.sizeChange=!0),e!=this.lastHeight&&(this.lastHeight=e,this.sizeChange=!0),this.mouseXVelocity.length>5&&this.mouseXVelocity.shift(),this.mouseXVelocity.push(i-this.lastMouseX),n(this.mouseXVelocity)!=this.lastMouseXVelocity&&(this.lastMouseXVelocity=n(this.mouseXVelocity),this.mouseChange=!0),i!=this.lastMouseX&&(this.lastMouseX=i,this.mouseChange=!0),this.mouseYVelocity.length>5&&this.mouseYVelocity.shift(),this.mouseYVelocity.push(s-this.lastMouseY),n(this.mouseYVelocity)!=this.lastMouseYVelocity&&(this.lastMouseYVelocity=n(this.mouseYVelocity),this.mouseChange=!0),s==this.lastMouseY&&0==n(this.mouseYVelocity)||(this.lastMouseY=s,this.mouseChange=!0),(this.scrollChange||this.sizeChange||this.mouseChange)&&this.callbacks.forEach(t=>t(this.formatData())),this.updating=!1,requestAnimationFrame(this.update)}watch(t,e=!0){if("function"!=typeof t)throw new Error("Value passed to Watch is not a function");if(e){const e=this.formatData();e.scroll.changed=!0,e.mouse.changed=!0,e.size.changed=!0,t(e)}this.callbacks.push(t)}unwatch(t){if("function"!=typeof t)throw new Error("The value passed to unwatch is not a function");this.callbacks=this.callbacks.filter(e=>e!==t)}};window.__TORNIS={watchViewport:i.watch,unwatchViewport:i.unwatch,getViewportState:i.formatData};const s=i.watch,o=i.unwatch,r=i.formatData;t.getViewportState=r,t.unwatchViewport=o,t.watchViewport=s,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e){var n,i,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}}();var a,h=[],u=!1,l=-1;function d(){u&&a&&(u=!1,a.length?h=a.concat(h):l=-1,h.length&&f())}function f(){if(!u){var t=c(d);u=!0;for(var e=h.length;e;){for(a=h,h=[];++l<e;)a&&a[l].run();l=-1,e=h.length}a=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new p(t,e)),1!==h.length||u||c(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},,function(t,e,n){"use strict";n.r(e);var i=n(0);const s={container:document.querySelector(".js-toc"),listContainer:document.querySelector(".js-toc-list"),links:null,headings:null,intersectionOptions:{rootMargin:"0px",threshold:1},previousSection:null,observer:null,init(){this.container&&"IntersectionObserver"in window&&(this.handleObserver=this.handleObserver.bind(this),this.setUpObserver(),this.findLinksAndHeadings(),this.observeSections(),this.links.forEach(t=>{t.addEventListener("click",this.handleLinkClick.bind(this))}))},handleToggleClick(){this.container.classList.toggle("is-active"),this.listContainer.addEventListener("transitionend",()=>{this.container.classList.contains("is-active")&&this.links[0].focus()},{once:!0})},handleLinkClick(t){t.preventDefault();let e=t.target.getAttribute("href").replace("#",""),n=this.headings.find(t=>t.getAttribute("id")===e);n.setAttribute("tabindex",-1),n.focus(),window.scroll({behavior:i.a.matches?"instant":"smooth",top:n.offsetTop-15,block:"start"}),this.container.classList.contains("is-active")&&this.container.classList.remove("is-active")},handleObserver(t,e){t.forEach(t=>{let e=`#${t.target.getAttribute("id")}`,n=this.links.find(t=>t.getAttribute("href")===e);t.isIntersecting&&1===t.intersectionRatio?(n.classList.add("is-visible"),this.previousSection=t.target.getAttribute("id")):n.classList.remove("is-visible"),this.highlightFirstActive()})},highlightFirstActive(){let t=this.container.querySelector(".is-visible");this.links.forEach(t=>{t.classList.remove("is-active")}),t&&t.classList.add("is-active"),!t&&this.previousSection&&this.container.querySelector(`a[href="#${this.previousSection}"]`).classList.add("is-active")},observeSections(){this.headings.forEach(t=>{this.observer.observe(t)})},setUpObserver(){this.observer=new IntersectionObserver(this.handleObserver,this.intersectionOptions)},findLinksAndHeadings(){this.links=[...this.container.querySelectorAll("a")],this.headings=this.links.map(t=>{let e=t.getAttribute("href");return document.querySelector(e)})}};var o=n(1);const r={async init(){this.coverImage=document.querySelector(".js-cover-image"),this.coverImage&&(this.setVariables(0,0),this.updateValues=this.updateValues.bind(this),Object(o.watchViewport)(this.updateValues))},setVariables(t,e){document.body.style.setProperty("--coverImageBlur",t),document.body.style.setProperty("--coverImageTranslateY",e)},updateValues({scroll:t}){if(t.changed&&t.top){let e=t.top/this.coverImage.clientHeight;const n=`${(8*(e=(e=e<0?0:e)>1?1:e)).toFixed(1)}px`,i=`${(-150*e).toFixed(1)}px`;this.setVariables(n,i)}}};function c(){}function a(t){return t()}function h(){return Object.create(null)}function u(t){t.forEach(a)}function l(t){return"function"==typeof t}function d(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}new Set;function f(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function y(){return b(" ")}function w(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function $(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}let k;function C(t){k=t}function V(){if(!k)throw new Error("Function called outside component initialization");return k}const x=[],O=Promise.resolve();let Y=!1;const X=[],S=[],E=[];function T(){Y||(Y=!0,O.then(_))}function L(t){S.push(t)}function _(){const t=new Set;do{for(;x.length;){const t=x.shift();C(t),H(t.$$)}for(;X.length;)X.shift()();for(;S.length;){const e=S.pop();t.has(e)||(e(),t.add(e))}}while(x.length);for(;E.length;)E.pop()();Y=!1}function H(t){t.fragment&&(t.update(t.dirty),u(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(L))}const A=new Set;function R(t,e){t&&t.i&&(A.delete(t),t.i(e))}let j;function I(t,e){t.$$.fragment&&(u(t.$$.on_destroy),e&&t.$$.fragment.d(1),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function z(t,e,n,i,s,o){const r=k;C(t);const d=e.props||{},f=t.$$={fragment:null,ctx:null,props:o,update:c,not_equal:s,bound:h(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(r?r.$$.context:[]),callbacks:h(),dirty:null};let p=!1;var g;f.ctx=n?n(t,d,(e,n)=>{f.ctx&&s(f.ctx[e],f.ctx[e]=n)&&(f.bound[e]&&f.bound[e](n),p&&function(t,e){t.$$.dirty||(x.push(t),T(),t.$$.dirty=h()),t.$$.dirty[e]=!0}(t,e))}):d,f.update(),p=!0,u(f.before_render),f.fragment=i(f.ctx),e.target&&(e.hydrate?f.fragment.l((g=e.target,Array.from(g.childNodes))):f.fragment.c(),e.intro&&R(t.$$.fragment),function(t,e,n){const{fragment:i,on_mount:s,on_destroy:o,after_render:r}=t.$$;i.m(e,n),L(()=>{const e=s.map(a).filter(l);o?o.push(...e):u(e),t.$$.on_mount=[]}),r.forEach(L)}(t,e.target,e.anchor),_()),C(r)}"undefined"!=typeof HTMLElement&&(j=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){I(this,1),this.$destroy=c}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});class q{$destroy(){I(this,1),this.$destroy=c}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function B(t,e=c){let n;const i=[];function s(e){if(d(t,e)){if(t=e,!n)return;i.forEach(t=>t[1]()),i.forEach(e=>e[0](t))}}return{set:s,update:function(e){s(e(t))},subscribe:function(o,r=c){const a=[o,r];return i.push(a),1===i.length&&(n=e(s)||c),o(t),()=>{const t=i.indexOf(a);-1!==t&&i.splice(t,1),0===i.length&&n()}}}}const W=B([]),D=function(t,e,n){const i=!Array.isArray(t),s=i?[t]:t,o=e.length<2,r=[],a={subscribe:B(n,t=>{let n=!1;const a=[];let h=0,d=c;const f=()=>{if(h)return;d();const n=e(i?a[0]:a,t);o?t(n):d=l(n)?n:c},p=s.map((t,e)=>t.subscribe(t=>{a[e]=t,h&=~(1<<e),n&&f()},()=>{u(r),h|=1<<e}));return n=!0,f(),function(){u(p),d()}}).subscribe};return{subscribe(t,e=c){r.push(e);const n=a.subscribe(t,e);return()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1),n()}}}}(W,t=>t.find(t=>t.url===document.location.pathname)),P="https://api.sheetson.com/v1/sheets/upvotes",N=new Headers({"X-Sheetson-Spreadsheet-Id":"1QvOEyvtjq0ByJ0TZDLJHECL0oKmlH4EAHGXde9AIqp8","Content-Type":"application/json"});function F(t="",e="GET",n){return new Request(`${P}${t}`,{method:e,headers:N,body:JSON.stringify(n)})}function U(t){var e,n,i,s,o;function r(t){return t.currentRecord?K:G}var c=r(t),a=c(t);return{c(){var r,c,h,u;e=m("button"),n=v("svg"),i=v("use"),s=y(),a.c(),$(i,"xlink:href","#heart"),w(n,"class","c-upvote-button__icon"),w(e,"class","c-upvote-button"),w(e,"type","button"),w(e,"aria-label","Show your appreciation by tapping or clicking"),w(e,"title","Like this post"),r=e,c="click",h=t.handleClickUpvote,r.addEventListener(c,h,u),o=()=>r.removeEventListener(c,h,u)},m(t,o){p(t,e,o),f(e,n),f(n,i),f(e,s),a.m(e,null)},p(t,n){c===(c=r(n))&&a?a.p(t,n):(a.d(1),(a=c(n))&&(a.c(),a.m(e,null)))},d(t){t&&g(e),a.d(),o()}}}function J(t){var e,n,i,s,o;function r(t){return t.currentRecord?Z:Q}var c=r(t),a=c(t);return{c(){e=m("div"),n=v("svg"),i=v("use"),s=y(),o=m("span"),a.c(),$(i,"xlink:href","#heart"),w(n,"class","c-upvote-button__icon"),w(e,"class","c-upvote-button is-active")},m(t,r){p(t,e,r),f(e,n),f(n,i),f(e,s),f(e,o),a.m(o,null)},p(t,e){c===(c=r(e))&&a?a.p(t,e):(a.d(1),(a=c(e))&&(a.c(),a.m(o,null)))},d(t){t&&g(e),a.d()}}}function G(t){var e;return{c(){(e=m("span")).textContent="Be the first to like this!"},m(t,n){p(t,e,n)},p:c,d(t){t&&g(e)}}}function K(t){var e,n,i=t.currentRecord.votes;return{c(){e=m("span"),n=b(i)},m(t,i){p(t,e,i),f(e,n)},p(t,e){t.currentRecord&&i!==(i=e.currentRecord.votes)&&M(n,i)},d(t){t&&g(e)}}}function Q(t){var e;return{c(){e=b("1")},m(t,n){p(t,e,n)},p:c,d(t){t&&g(e)}}}function Z(t){var e,n=t.parseInt(t.currentRecord.votes,10)+1;return{c(){e=b(n)},m(t,n){p(t,e,n)},p(t,i){t.currentRecord&&n!==(n=i.parseInt(i.currentRecord.votes,10)+1)&&M(e,n)},d(t){t&&g(e)}}}function tt(t){var e;function n(t){return t.hasBeenClicked?J:U}var i=n(t),s=i(t);return{c(){s.c(),e=b("")},m(t,n){s.m(t,n),p(t,e,n)},p(t,o){i===(i=n(o))&&s?s.p(t,o):(s.d(1),(s=i(o))&&(s.c(),s.m(e.parentNode,e)))},i:c,o:c,d(t){s.d(t),t&&g(e)}}}function et(t,e,n){let{currentRecord:i,hasBeenClicked:s=!1}=e;var o;return D.subscribe(t=>{n("currentRecord",i=t)}),o=async()=>{const t=await fetch(F("?limit=100")),{results:e}=await t.json();W.set(e)},V().$$.on_mount.push(o),t.$set=t=>{"currentRecord"in t&&n("currentRecord",i=t.currentRecord),"hasBeenClicked"in t&&n("hasBeenClicked",s=t.hasBeenClicked)},{currentRecord:i,hasBeenClicked:s,handleClickUpvote:function(){const{pathname:t}=document.location;if(n("hasBeenClicked",s=!0),!i)return void fetch(F("/","POST",{url:t,votes:1}));const{rowIndex:e,votes:o}=i;!function({rowIndex:t,votes:e}){fetch(F(`/${t}`,"PUT",{votes:e}))}({rowIndex:e,votes:parseInt(o,10)+1})},parseInt:parseInt}}var nt=class extends q{constructor(t){super(),z(this,t,et,tt,d,["currentRecord","hasBeenClicked"])}};Object(i.b)(async()=>{const t=document.querySelector(".js-select-nav");t&&t.addEventListener("change",t=>{window.location=t.target.value}),r.init(),s.init();const e=document.querySelector(".js-upvotes");e&&new nt({target:e})})}]);