{{ define "main" }}
<div class="{{ if .Params.toc }} has-toc {{ end }}">
  {{ if .Params.toc }}
    <aside class="c-toc js-toc">
      <div class="c-toc__list-container js-toc-list" tabindex="-1">
        <p class="c-toc__title">Table of Contents</h2>
        {{ .TableOfContents }}
      </div>
    </aside>
  {{ end }}
  <article itemscope itemtype="http://schema.org/Article">
    {{ $coverImage := .Params.cover_image }}
    {{ $coverImageAlt := .Params.cover_image_alt }}
    {{ with $coverImage }}
      {{ with $coverImageAlt }}
      <div class="c-post__cover-image">
        <img src="https://res.cloudinary.com/dab4jaczr/image/upload/w_1000,f_auto,q_auto/v1536498344/{{ $coverImage }}"
          sizes="100vw" srcset="https://res.cloudinary.com/dab4jaczr/image/upload/w_400,f_auto,q_auto/v1536498344/{{ $coverImage }} 400w,
            https://res.cloudinary.com/dab4jaczr/image/upload/w_600,f_auto,q_auto/v1536498344/{{ $coverImage }} 600w,
            https://res.cloudinary.com/dab4jaczr/image/upload/w_900,f_auto,q_auto/v1536498344/{{ $coverImage }} 900w,
            https://res.cloudinary.com/dab4jaczr/image/upload/w_1000,f_auto,q_auto/v1536498344/{{ $coverImage }} 1000w,
            https://res.cloudinary.com/dab4jaczr/image/upload/w_1200,f_auto,q_auto/v1536498344/{{ $coverImage }} 1200w,
            https://res.cloudinary.com/dab4jaczr/image/upload/w_1600,f_auto,q_auto/v1536498344/{{ $coverImage }} 1600w"
          alt="{{ $coverImageAlt }}" loading="auto" />
      </div>
      {{ end }}
    {{ end }}

    <div class="c-post__body">
      <div class="c-post__header">

        <time class="c-post__date" itemprop="datePublished" datetime="{{ .PublishDate }}">
          {{ .PublishDate.Format "2 January 2006" }}
        </time>

        <h1 itemprop="name headline" class="c-post__headline">{{ .Title }}</h1>

      </div>

      <div class="c-post__content">
        {{ .Content }}
      </div>
      {{ if .Params.Categories }}
        <div class="c-post__categories">
          <small class="c-post__categories-title">Categories: &nbsp;</small>
          <ul class="c-post__categories-list">
            {{ range .Params.Categories }}
            <li class="c-post__categories-item">
              <a href="/category/{{ . | urlize }}">
                <small>{{ . }}</small>
              </a>
            </li>
            {{ end }}
          </ul>
        </div>
      {{ end }}

      <div class="c-post__navigation">
        {{ with .NextInSection }}
        <p>Next: <a rel="next" href="{{ .Permalink }}">{{ .Title }}</a></p>
        {{ end }}
        {{ with .PrevInSection }}
        <p>Previous: <a rel="prev" href="{{ .Permalink }}">{{ .Title }}</a></p>
        {{ end }}
      </div>
    </div>
  </article>
</div>

<div class="c-wrapper c-wrapper--light">
  <div class="l-container">
    <div class="c-post">
      <h3 id="comments">Comments</h4>

      <p>I accept comments via email, and clicking "Add Comment" will open your default email client. If the thoughts of your native email client opening horrifies you, you can instead email your comment to contact@tj.ie.</p>

      <a class="c-btn c-btn-primary" href="mailto:contact@tj.ie?subject=Comment - {{ .Title }}">Add Comment</a>
    </div>
  </div>
</div>
{{ end }}
